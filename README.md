# Semantic Telegram Bot (FastAPI + PTB + Gemini + FAISS)

–ì–æ—Ç–æ–≤—ã–π –ø–∞–∫–µ—Ç –¥–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ Render.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –ª–æ–∫–∞–ª—å–Ω–æ

```bash
python -m venv .venv && source .venv/bin/activate
pip install -r requirements.txt
cp .env.example .env  # –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
export $(grep -v '^#' .env | xargs)  # –¥–ª—è Linux/macOS
uvicorn app.main:app --host 0.0.0.0 --port 8000
```

## –î–µ–ø–ª–æ–π –Ω–∞ Render

1. –ó–∞–ª–µ–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub.
2. –í Render —Å–æ–∑–¥–∞–π—Ç–µ **Web Service** –∏–∑ —ç—Ç–æ–≥–æ —Ä–µ–ø–æ. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ—á–∏—Ç–∞–µ—Ç `render.yaml` –∏ `Dockerfile`.
3. –í Variables –¥–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã: `TELEGRAM_BOT_TOKEN`, `GEMINI_API_KEY`, `PUBLIC_BASE_URL`, `ADMIN_USER_IDS`, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ TM_*.
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `RUN_MODE=webhook` –∏ `PUBLIC_BASE_URL` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—É–±–ª–∏—á–Ω—ã–π URL —Å–µ—Ä–≤–∏—Å–∞.
5. –ü–æ—Å–ª–µ —Å—Ç–∞—Ä—Ç–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `/` (–¥–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å `{"ok": true}`).

### –í–∫–ª—é—á–µ–Ω–∏–µ Telegram webhook

–°–µ—Ä–≤–∏—Å —Å–∞–º –ø—Ä–æ—Å—Ç–∞–≤–∏—Ç webhook –Ω–∞ `PUBLIC_BASE_URL/telegram/<TELEGRAM_BOT_TOKEN>` –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ.

### –ü–∞–ø–∫–∏ –¥–∞–Ω–Ω—ã—Ö

–§–∞–π–ª—ã, –∏–Ω–¥–µ–∫—Å, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ ‚Äî –≤ `/opt/render/project/src/data/*`. –≠—Ç–∏ –ø—É—Ç–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.



## –ù–æ–≤—ã–π —Ä–µ–∂–∏–º: üóÇÔ∏è –†–∞–±–æ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏

–í —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ –º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å **DOC/DOCX/PDF** –∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–∏–º–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Ç–µ–∫—É—â–µ–≥–æ –¥–∏–∞–ª–æ–≥–∞ (–±–µ–∑ –∑–∞–ø–∏—Å–∏ –≤ –æ–±—â–∏–π –∏–Ω–¥–µ–∫—Å).

–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
- `/doc_summary` ‚Äî –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞.
- `/doc_check` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–≥–æ–≤–æ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏/—Ä–∏—Å–∫–∏, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–∞–≤–∫–∞–º.
- `/doc_compare` ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤ (–ø–æ–∫–∞–∂—É —Ä–∞–∑–ª–∏—á–∏—è –ø–æ —Ç–µ–∫—Å—Ç—É).
- –õ—é–±–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å –≤ —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ ‚Äî RAG-–æ—Ç–≤–µ—Ç –ø–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º –¥–æ–∫—É–º–µ–Ω—Ç–∞–º.

–ï—Å–ª–∏ –æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–∞–µ—Ç—Å—è –¥–ª–∏–Ω–Ω—ã–º ‚Äî –±–æ—Ç —Ä–∞–∑–æ–±—å—ë—Ç –µ–≥–æ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
